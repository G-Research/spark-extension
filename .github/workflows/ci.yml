name: CI

on:
  schedule:
    - cron: '0 8 */10 * *'
  push:
    branches:
      - master
    tags:
      - '*'
  merge_group:
  pull_request:
  workflow_dispatch:

jobs:
  releases:
    uses: "./.github/workflows/releases.yml"
  snapshots:
    uses: "./.github/workflows/snapshots.yml"

  test_success:
    name: "Test success"
    runs-on: ubuntu-latest
    needs: [releases, snapshots]
    steps:
      - name: Noop
        run: true
        shell: bash

  event_file:
    name: "Event File"
    runs-on: ubuntu-latest
    steps:
      - name: Upload
        uses: actions/upload-artifact@v3
        with:
          name: Event File
          path: ${{ github.event_path }}
